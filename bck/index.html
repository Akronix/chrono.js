<!DOCTYPE html>
<html>
<head>
  <title>WebApp installer</title>
  <meta charset="UTF-8">
</head>

<body>
    <p>Website for installing the stopwatch locally with the webapp packaged</p>

    <script>
      (function() {
          var manifestUrl = location.href.replace("index.html","") +'manifest.webapp';

          if (! navigator.mozApps.installPackage) {
            alert("ERROR: This app is not compatible with your device.");
            return;
          } 

          var req = navigator.mozApps.installPackage(manifestUrl);
          req.onsuccess = function() {
            alert("Chrono.js successfully installed."+this.result.origin);
          };
          req.onerror = function() {
            alert("Error installing: "+this.error.name);
          };
      }
      )();
    </script>
</body>
</html>
